<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Contamination</title>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
   <!-- Make sure you put this AFTER Leaflet's CSS -->
 	<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>
   <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
   
     
   <style type="text/css">
   		#mapid { height: 600px; }
   </style>

</head>
<body>
	<div id="mapid"></div>
</body>
<script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script>
<script type="text/javascript">
		// initialize the map on the "map" div with a given center and zoom
		var map = L.map('mapid').setView([41.383333, 2.18333], 13);
		/*
		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    		maxZoom: 18,
    		id: 'mapbox.streets',
    		accessToken: 'pk.eyJ1Ijoiam9obnR5bGVyIiwiYSI6ImNqeXp6cHU1eTA2cDgza2xveTJjYnlwcTMifQ.yzPTE0XW24Y6jzTDY88geg'
		}).addTo(map);
		*/
		var Stamen_Toner = L.tileLayer('http://{s}tile.stamen.com/toner-lite/{z}/{x}/{y}.png', {
              subdomains: ['','a.','b.','c.','d.'],
              attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'
            
		});
		map.addLayer(Stamen_Toner);

		var marker = L.marker([41.383333, 2.183333]).addTo(map);

		var circle = L.circle([41.383333, 2.2], {
    		color: 'green',
    		fillColor: '#f03',
    		fillOpacity: 0.5,
    		radius: 500
		}).addTo(map);

		var popup = L.popup();

		function onMapClick(e) {
    		popup
        		.setLatLng(e.latlng)
        		.setContent("You clicked the map at " + e.latlng.toString())
        		.openOn(map);
			}
		map.on('click', onMapClick);

		
/*
		$.getJSON("./barris.geojson",function(data){
		// add GeoJSON layer to the map once the file is loaded
			var datalayer = L.geoJson(data ,{
			onEachFeature: function(feature, featureLayer) {
			featureLayer.bindPopup(feature.properties.NAME_1);
			}
			}).addTo(map);
			map.fitBounds(datalayer.getBounds());
		}); 
*/		var bcngeodata = "https://cdn.rawgit.com/martgnz/bcn-geodata/master/barris/barris_geo.json";
		$.getJSON(bcngeodata,function(data){
		// add GeoJSON layer to the map once the file is loaded
			var datalayer = L.geoJson(data ,{
			onEachFeature: function(feature, featureLayer) {
			featureLayer.bindPopup(feature.properties.NAME_1);
			}
			}).addTo(map);
			map.fitBounds(datalayer.getBounds());
		}); 
/*
		var geojson = new L.GeoJSON.AJAX("barris.geojson");
		geojson.on('data:loaded', function(){
			geojson.addTo(mymap);
		});
	*/	
		//<script src="/leaflet-0.7.2/leaflet.ajax.min.js">
		//var geojsonLayer = new L.GeoJSON.AJAX("barris.geojson");       
		//geojsonLayer.addTo(map);

</script>
</html>








